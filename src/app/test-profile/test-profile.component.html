<div class="card">
  <!-- Header -->
  <div class="header d-flex justify-content-between align-items-center">
    <div>
      <h4 class="title mb-0">Test Profiles</h4>
      <p class="category">List of configured QoS profiles</p>
    </div>
    <!-- Bouton New Profile en haut -->
    <button class="btn btn-primary" (click)="openNewProfilePopup()">New Profile</button>
  </div>

  <!-- Table -->
  <div class="content table-responsive table-full-width">
    <table class="table table-hover table-striped">
      <thead>
        <tr>
          <th>Profile Name</th>
          <th>Creation Date</th>
          <th>Packet Size</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let profile of testProfiles">
          <td>{{ profile.profile_name }}</td> <!-- Correction du nom -->
          <td>{{ profile.creation_date | date }}</td> <!-- Formatage de la date -->
          <td>{{ profile.packet_size }}</td> <!-- Correction du nom -->
          <td>
            <i class="fa fa-pencil text-warning me-2" style="cursor: pointer;" (click)="onEdit(profile)" title="Edit"></i>
            <i class="fa fa-trash text-danger" style="cursor: pointer;" (click)="onDelete(profile)" title="Delete"></i>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal Popup for New Profile -->
<div class="popup-overlay" *ngIf="showNewProfilePopup">
  <div class="popup-box">
    <div class="popup-header">
      <h5 class="modal-title">Create New Test Profile</h5>
      <button class="btn-close" (click)="closeNewProfilePopup()">×</button>
    </div>

    <div class="popup-body">
      <!-- Form to create a new profile -->
      <form (ngSubmit)="createNewProfile()"> <!-- Utilisation de ngSubmit pour éviter le rechargement -->
        <div class="mb-3">
          <label>Profile Name</label>
          <input type="text" class="form-control" [(ngModel)]="newProfile.name" name="name" required />
        </div>

        <div class="mb-3">
          <label>Time Between 2 Attempts (seconds)</label>
          <input type="number" class="form-control" [(ngModel)]="newProfile.timeBetweenAttempts" name="timeBetweenAttempts" required />
        </div>

        <div class="mb-3">
          <label>Packet Size (Bytes)</label>
          <input type="number" class="form-control" [(ngModel)]="newProfile.packetSize" name="packetSize" required />
        </div>

        <div class="mb-3">
          <button class="btn btn-primary" type="submit">Create Profile</button> <!-- Ajout de type="submit" -->
        </div>
      </form>
    </div>
  </div>
</div>
