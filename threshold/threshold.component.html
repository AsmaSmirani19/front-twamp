<div class="popup-backdrop" *ngIf="showPopup">
  <div class="popup-card">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5>Create New Threshold</h5>
      <button class="btn btn-sm btn-close" (click)="showPopup = false"></button>
    </div>
    
    <div class="row mb-3">
      <div class="col-md-6">
        <label class="form-label">Threshold Name</label>
        <input class="form-control form-control-sm" [(ngModel)]="newThreshold.name" />
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered table-sm">
        <thead class="table-light">
          <tr>
            <th width="30%">Metric</th>
            <th width="20%">Operator</th>
            <th width="25%">Value (ms)</th>
            <th width="25%">Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let metric of thresholdMetrics">
            <td>{{ metric.label }}</td>
            <td>
              <select class="form-select form-select-sm" [(ngModel)]="metric.operator">
                <option value=">">></option>
                <option value="<"><</option>
                <option value=">=">>=</option>
                <option value="<="><=</option>
                <option value="==">==</option>
              </select>
            </td>
            <td><input type="number" class="form-control form-control-sm" [(ngModel)]="metric.value" /></td>
            <td>
              <div class="d-flex justify-content-center">
                <button class="btn btn-sm" [ngClass]="metric.enabled ? 'btn-success' : 'btn-outline-secondary'" 
                        (click)="metric.enabled = !metric.enabled">
                  {{ metric.enabled ? 'Active' : 'Inactive' }}
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <button class="btn btn-outline-secondary" (click)="showPopup = false">Cancel</button>
      <button class="btn btn-primary" (click)="createThreshold()">Create Threshold</button>
    </div>
  </div>
</div>